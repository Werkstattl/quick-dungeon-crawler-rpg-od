<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="theme-color" content="#000000">
    <link rel="stylesheet" href="./assets/css/all.min.css">
    <link rel="stylesheet" href="./assets/css/rpg-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
    <link rel="manifest" href="./site.webmanifest">
    <link rel="mask-icon" href="./safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <title>Quick Dungeon Crawler on Demand!</title>
    <meta name="description" content="Quick Dungeon Crawler on Demand! Dive into a fast-paced, browser-based RPG adventure. Explore dungeons, battle monsters, and level up instantlyâ€”no downloads required!">
    <style>
		body {
			background: #000000;
		}
    </style>
</head>
<body>
    <main>
        <section id="title-screen" class="game-container">
            <div>
                <img src="assets/icon/logo.webp" alt="Quick Dungeon Crawler logo">
                <h1>Quick Dungeon Crawler on Demand!</h1>
            </div>
            <p data-i18n="tap-to-explore">Tap to explore the dungeon</p>
            <button id="title-menu-btn" aria-label="Open menu"><i class="fas fa-cog"></i></button>
        </section>
        <section id="character-creation" class="game-container">
            <form id="name-submit">
                <h1 data-i18n="what-is-your-name">What is your name?</h1>
                <input type="text" id="name-input" autocomplete="off" value="Hero">
                <p id="alert"></p>
                <label><input type="checkbox" id="hardcore-checkbox" style="width:inherit;position:relative;top:1px"> <span data-i18n="hardcore">Hardcore</span></label>
                <br>
                <button type="submit" data-i18n="confirm">Confirm</button>
            </form>
        </section>
        <section id="dungeon-main" class="game-container scrollable">
            <header>
                <p id="player-name"></p>
                <p id="player-exp"></p>
                <p id="player-gold"></p>
                <button onclick="openInventory()" data-i18n-attr="aria-label:open-inventory" aria-label="Open inventory"><i class="fas fa-bars" style="font-size: calc(1.3rem * var(--font-scale));"></i></button>
            </header>
            <div class="stat-panel">
                <div class="box" id="dungeon-stats-panel">
                    <h4>
                        <a class="stats-title-link" href="#" onclick="openStatsModal(); event.stopPropagation(); return false;" aria-label="Open stats details">
                            <span data-i18n="stats">Stats</span>
                            <i class="fa fa-link" aria-hidden="true"></i>
                        </a>
                    </h4>
                    <p title="Health points"><i class="fas fa-heart" id="player-hp-icon"></i><span data-i18n="hp">HP:</span> <span id="player-hp"></span></p>
                    <div class="key-stats" aria-label="Core stats">
                        <p title="Attack power; increases damage dealt"><i class="ra ra-sword"></i><span data-i18n="atk">ATK:</span> <span id="player-atk"></span></p>
                        <p title="Defense; reduces damage taken"><i class="ra ra-round-shield"></i><span data-i18n="def">DEF:</span> <span id="player-def"></span></p>
                        <p title="Attacks per second (attack speed)"><i class="ra ra-plain-dagger"></i><span data-i18n="aps">APS:</span> <span id="player-atkspd"></span></p>
                    </div>
                    <details class="advanced-stats" id="advanced-stats">
                        <summary><span data-i18n="more">More</span></summary>
                        <div>
                            <p title="Vampirism; percent of damage returned as health"><i class="ra ra-dripping-blade"></i><span data-i18n="vamp">VAMP:</span> <span id="player-vamp"></span></p>
                            <p title="Critical hit chance"><i class="ra ra-lightning-bolt"></i><span data-i18n="c-rate">C.RATE:</span> <span id="player-crate"></span></p>
                            <p title="Critical damage bonus"><i class="ra ra-focused-lightning"></i><span data-i18n="c-dmg">C.DMG:</span> <span id="player-cdmg"></span></p>
                            <p title="Chance to evade attacks"><i class="ra ra-player-dodge"></i><span data-i18n="dodge">DODGE:</span> <span id="player-dodge"></span></p>
                            <p title="Increases equipment drop chance"><i class="ra ra-perspective-dice-one"></i><span data-i18n="luck">LUCK:</span> <span id="player-luck"></span></p>
                        </div>
                    </details>
                </div>
                <div class="box" id="bonus-stats"></div>
                <div class="box" id="companion-panel">
                    <h4 data-i18n="companion">Companion</h4>
                    <p id="companion-name" data-i18n="none">None</p>
                    <p><i class="ra ra-sword"></i><span data-i18n="atk">ATK:</span> <span id="companion-atk">0</span></p>
                    <p><i class="ra ra-plain-dagger"></i><span data-i18n="aps">APS:</span> <span id="companion-atkspd">0</span></p>
                    <p id="companion-bonus"></p>
                    <button id="summon-companion" class="hidden" data-i18n="summon">Summon</button>
                </div>
            </div>
            <div class="dungeon-head">
                <p id="dungeonTime"></p>
                <p id="floorCount"></p>
                <p id="roomCount"></p>
                <div>
                    <button id="dungeonActivity"></button>
                    <button id="auto-mode-btn" class="hidden" aria-label="Toggle auto mode"><i class="fas fa-play"></i></button>
                </div>
            </div>
            <div class="logBox primary-panel">
                <div class="logBox-header">
                    <p id="dungeonAction"></p>
                    <button id="clear-log-button" type="button" class="clear-log-button" data-i18n="clear-log" data-i18n-attr="aria-label:clear-log" aria-label="Clear log">Clear log</button>
                </div>
                <div id="dungeonLog"></div>
            </div>
        </section>
        <div id="loading" class="game-container">
            <div class="loader"></div>
        </div>
        <div class="modal-container" id="inventory">
            <div class="content">
                <div class="content-head">
                      <h3><span data-i18n="inventory">Inventory</span> (<span id="inventory-item-count">0</span>/100)</h3>
                    <div>
                        <p onclick="openForgeModal()" role="button" aria-label="Open forge"><i class="ra ra-anvil"></i></p>
                        <p onclick="closeInventory()" role="button" aria-label="Close inventory"><i class="fa fa-xmark"></i></p>
                    </div>
                </div>
                <div class="content-head">
                      <select id="sell-rarity">
                          <option value="none" data-i18n="sell">Sell</option>
                          <option class="Common" value="Common" data-i18n="common">Common</option>
                          <option class="Uncommon" value="Uncommon" data-i18n="uncommon">Uncommon</option>
                          <option class="Rare" value="Rare" data-i18n="rare">Rare</option>
                          <option class="Epic" value="Epic" data-i18n="epic">Epic</option>
                          <option class="Legendary" value="Legendary" data-i18n="legendary">Legendary</option>
                          <option class="Heirloom" value="Heirloom" data-i18n="heirloom">Heirloom</option>
                          <option class="Common" value="All" data-i18n="all">All</option>
                      </select>
                      <select id="sort-inventory">
                          <option value="none" data-i18n="sort">Sort</option>
                          <option value="category" data-i18n="category">Category</option>
                          <option value="level" data-i18n="level">Level</option>
                          <option value="rarity" data-i18n="rarity">Rarity</option>
                          <option value="tier" data-i18n="tier">Tier</option>
                      </select>
                  </div>
                <div class="inventorySlots" id="playerInventory"></div>
                <div class="stat-panel">
                    <div class="box">
                        <div class="box-head">
                              <h4 data-i18n="equipment">Equipment</h4>
                            <div>
                                <p id="equip-best-settings" role="button" aria-label="Configure auto-equip priorities" title="Auto Equip Priorities"><i class="fa fa-sliders-h"></i></p>
                                <p id="equip-best"><i class="fa fa-arrows-rotate"></i></p>
                                <p id="unequip-all"><i class="fa fa-circle-xmark"></i></p>
                            </div>
                        </div>
                        <div id="playerEquipment"></div>
                    </div>
                </div>
                <button id="menu-btn" data-i18n="menu">Menu</button>
            </div>
        </div>
        <div class="modal-container" id="equipmentInfo"></div>
        <div class="modal-container" id="combatPanel"></div>
        <div class="modal-container" id="endgameModal">
            <div class="content endgame-content">
                <h3 data-i18n="run-summary">Run summary</h3>
                <p class="endgame-player">
                    <span id="endgame-player-name"></span>
                    <span id="endgame-player-mode" class="endgame-mode-badge" hidden></span>
                </p>
                <ul class="endgame-meta" id="endgame-meta"></ul>
                <div class="endgame-unlocks" id="endgame-unlocks" hidden></div>
                <ul class="endgame-stats" id="endgame-stats"></ul>
                <p class="endgame-hint" data-i18n="run-summary-hint">Start a new run to dive back into the dungeon.</p>
                <div class="button-container">
                    <button id="endgame-start-btn" data-i18n="start-new-run">Start new Run</button>
                </div>
            </div>
        </div>
        <div class="modal-container" id="lvlupPanel">
            <div class="content" id="lvlupSelect"></div>
        </div>
        <div class="modal-container" id="defaultModal"></div>
        <div class="modal-container" id="menuModal"></div>
        <div class="modal-container" id="confirmationModal"></div>
        <div class="modal-container" id="statsModal">
            <div class="content">
                <div class="content-head">
                    <h3 data-i18n="stats">Stats</h3>
                    <p onclick="closeStatsModal()" aria-label="Close stats"><i class="fa fa-xmark"></i></p>
                </div>
                <div class="modal-body">
                    <p><i class="fas fa-heart"></i>Health points. When it reaches 0, you are defeated.</p>
                    <p><i class="ra ra-sword"></i>Attack power that increases damage dealt.</p>
                    <p><i class="ra ra-round-shield"></i>Defense that reduces damage taken.</p>
                    <p><i class="ra ra-plain-dagger"></i>Attacks per second; higher values make you attack faster.</p>
                    <p><i class="ra ra-dripping-blade"></i>Percent of damage returned as health.</p>
                    <p><i class="ra ra-lightning-bolt"></i>Chance to land a critical hit.</p>
                    <p><i class="ra ra-focused-lightning"></i>Bonus damage dealt on critical hits.</p>
                    <p><i class="ra ra-player-dodge"></i>Chance to evade incoming attacks.</p>
                    <p><i class="ra ra-perspective-dice-one"></i>Increases equipment drop chance.</p>
                    <p><strong data-i18n="stat-display.faster-run">Faster Run</strong>: Boot bonus that reduces time between dungeon events.</p>
                </div>
            </div>
        </div>
        <div class="modal-container" id="companionModal">
            <div class="content">
                <div class="content-head">
                      <h3 data-i18n="companions">Companions</h3>
                    <p onclick="closeCompanionModal()"><i class="fa fa-xmark"></i></p>
                </div>
                <div class="companion-list" id="available-companions"></div>
            </div>
        </div>
        <div class="modal-container" id="forgeModal">
            <div class="content">
                <div class="content-head">
                      <h3><i class="ra ra-anvil"></i> <span data-i18n="the-forge">The Forge</span></h3>
                    <p onclick="closeForgeModal()"><i class="fa fa-xmark"></i></p>
                </div>
                <div class="forge-description">
                      <p data-i18n="combine-three-items-of-the-same-tier-and-rarity-to-forge-one-of-the-next-rarity">Combine three items of the same tier and rarity to forge one of the next rarity!</p>
                    <p id="forge-player-gold" class="forge-current-gold"></p>
                </div>
                <div class="forge-slots">
                    <div class="forge-slot-container">
                          <h4 data-i18n="material-1">Material 1</h4>
                          <div class="forge-slot" id="forge-slot-1">
                            <p data-i18n="select-equipment">Select equipment</p>
                          </div>
                    </div>
                    <div class="forge-slot-container">
                          <h4 data-i18n="material-2">Material 2</h4>
                          <div class="forge-slot" id="forge-slot-2">
                            <p data-i18n="select-equipment">Select equipment</p>
                          </div>
                    </div>
                    <div class="forge-plus">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="forge-slot-container">
                          <h4 data-i18n="material-3">Material 3</h4>
                          <div class="forge-slot" id="forge-slot-3">
                            <p data-i18n="select-equipment">Select equipment</p>
                          </div>
                    </div>
                </div>
                <div class="forge-result" id="forge-result" style="display: none;">
                      <h4 data-i18n="result-preview">Result Preview</h4>
                    <div class="forge-result-item" id="forge-result-item"></div>
                    <div class="forge-cost">
                          <p><span data-i18n="cost">Cost:</span> <i class="fas fa-coins" style="color: #FFD700;"></i><span id="forge-cost-amount">0</span> <span data-i18n="gold">gold</span></p>
                    </div>
                </div>
                <div class="forge-equipment-list" id="forge-equipment-list">
                      <h4 data-i18n="available-equipment">Available Equipment</h4>
                    <div class="forge-equipment-grid" id="forge-equipment-grid"></div>
                </div>
                <div class="forge-buttons">
                      <button id="forge-confirm" disabled data-i18n="forge-equipment">Forge Equipment</button>
                      <button id="forge-clear" data-i18n="clear-selection">Clear Selection</button>
                </div>
            </div>
        </div>
    </main>
	<script src="./assets/js/howler.min.js"></script>
    <script src="./assets/js/utility.js"></script>
    <script src="./assets/js/elements.js"></script>
    <script src="./assets/js/music.js"></script>
    <script src="./assets/js/player.js"></script>
    <script src="./assets/js/equipment.js"></script>
    <script src="./assets/js/forge.js"></script>
    <script src="./assets/js/companion.js"></script>
    <script src="./assets/js/combat.js"></script>
    <script src="./assets/js/automode.js"></script>
    <script src="./assets/js/dungeon.js"></script>
    <script src="./assets/js/enemy.js"></script>
    <script src="./assets/js/bestiary.js"></script>
    <script src="./assets/js/language.js"></script>
    <script src="./assets/js/main.js"></script>
    <script>
        if (typeof navigator.serviceWorker !== 'undefined' && !(window.Capacitor && window.Capacitor.isNativePlatform && window.Capacitor.isNativePlatform())) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
    <script src="./assets/js/native.js"></script>
</body>
</html>
